{% extends 'base.html.twig' %}

{% block stylesheets %}

    {{ parent() }}

    <link rel="stylesheet" href="{{ asset('css/home.css') }}">
{% endblock %}

{% block body %}
    {# {{ parent() }} #}

    {# commentaire en twig #}

    {# CONTENU ACCUEIL #}

    {# <p>{{ test|capitalize }}</p> #}

    {# foreach ($posts as $post) {} #}

{#    {{ render(controller('App\\Controller\\PartialController::sayHello', {#}
{#        'isMac': isMac#}
{#    })) }}#}

    <h1>Accueil</h1>

{#    <section>#}
{#        <h2>From the HomeController main request</h2>#}
{#        {% if isMac %}#}
{#            <hr>#}
{#            <small>BTW, you're using a Mac!</small>#}
{#        {% else %}#}
{#            <small>BTW, you're NOT using a Mac!</small>#}
{#        {% endif %}#}
{#    </section>#}


{#    <form method="post" class="my-5">#}
{#        <legend>Filtrer les articles</legend>#}
{#        <div>#}
{#            <label for="category">Catégorie</label>#}
{#            <select name="category" id="category">#}
{#                <option value="0">Toutes les catégories</option>#}
{#                {% for category in categories %}#}
{#                    <option value="{{ category.id }}">{{ category.name }}</option>#}
{#                {% endfor %}#}
{#            </select>#}
{#        </div>#}
{#        <div>#}
{#            <label for="created-at-min">Articles parus après</label>#}
{#            <input type="date" name="created-at-min" id="created-at-min">#}
{#        </div>#}
{#        <input class="btn btn-primary mt-3" type="submit" value="Rechercher">#}
{#    </form>#}

    {{ form_start(form) }}
    {{ form_widget(form) }}
    {{ form_end(form) }}

    <div class="row">
        {% for post in posts %}
            <div class="card mb-4 col-xl-3">
                <div class="card-header">
                    <figure class="figure">
                        <img src="{{ asset_post_image(post.image) }}" alt="{{ post.title }}" class="figure-img img-fluid rounded">
                    </figure>
                </div>
                <div class="card-body">
                    <h2 class="card-title">{{ post.title }}</h2>
                    <span class="badge bg-secondary">{{ post.category.name }}</span>
                    <p class="card-text">{{ post.content|slice(0, 150) }} ...</p>
                    <a href="{{ path('post.index', {'slug': post.slug}) }}" class="btn btn-primary">Lire la suite</a>
                </div>
                <div class="card-footer text-muted">Créé par {{ post.user.fullname }} le {{ post.createdAt|date("d/m/Y", "Europe/Paris") }}</div>
            </div>
        {% endfor %}
    </div>

{% endblock %}

